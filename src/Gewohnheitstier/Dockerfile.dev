# syntax=docker/dockerfile:1.7
FROM node:20-bullseye

RUN apt-get update && apt-get install -y --no-install-recommends tini && rm -rf /var/lib/apt/lists/*

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

RUN useradd -m appuser && chown -R appuser:appuser /app
USER appuser
ENTRYPOINT ["/usr/bin/tini","--"]
CMD ["npm","run","dev"]
